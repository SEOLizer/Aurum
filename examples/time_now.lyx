// examples/time_now.lyx
// Demonstration der now() Funktion fuer aktuelle Systemzeit

// import std.io;  // Temporär deaktiviert wegen break-Statement Bug
import std.time;

fn main(): int64 {
  Print("=== Systemzeit Demo ===\n\n");
  
  // Aktuelle Zeit holen
  var current: datetime := now();
  printf("Aktuelle Unix-Zeit: %d Sekunden seit Epoch\n", current);
  
  // In date umwandeln (Tage seit Epoch)
  var days: int64 := current / 86400;
  var today: date := days;
  printf("Heute ist Tag %d seit 1970-01-01\n", today);
  printf("Das entspricht dem Jahr: %d\n", YearFromDate(today));
  
  // Zeitkomponente extrahieren (Sekunden seit Mitternacht UTC)
  var sec_of_day: int64 := current % 86400;
  var current_time: time := sec_of_day;
  printf("\nAktuelle Uhrzeit (UTC):\n");
  printf("  Stunde: %d\n", HourFromTime(current_time));
  printf("  Minute: %d\n", MinuteFromTime(current_time));
  printf("  Sekunde: %d\n", SecondFromTime(current_time));
  
  // Millisekunden-Präzision
  var ms: int64 := NowMs();
  printf("\nAktuelle Zeit in Millisekunden: %d\n", ms);
  
  // Zeitmessung
  Print("\nZeitmessung:\n");
  var start: int64 := NowMs();
  
  // Einfache Schleife als "Arbeit"
  var i: int64 := 0;
  while (i < 1000000) {
    i := i + 1;
  }
  
  var ende: int64 := NowMs();
  var dauer: int64 := ende - start;
  printf("Schleife dauerte: %d ms\n", dauer);
  
  Print("\n=== Demo beendet ===\n");
  return 0;
}
